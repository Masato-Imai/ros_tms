#!/usr/bin/env python
# -*- coding:utf-8 -*-
import rospy

from nav_msgs.msg import Odometry
from visualization_msgs.msg import Marker, MarkerArray
 
def callback(data):
    marker.header.stamp = rospy.Time.now()
    marker.id += 1
    marker.pose = data.pose.pose

    marker.color.r = 0.796
    marker.color.g = 0.000
    marker.color.b = 0.596

    pub.publish(marker)

if __name__ == '__main__':
    try:
        # Init Node
        rospy.init_node("trajectory_visualize", anonymous=True)

        # Pub
        pub = rospy.Publisher('/trajectory_marker', Marker, queue_size=100)
        marker = Marker()
        marker.header.frame_id = "/world_link"
        marker.id = 0
        marker.type = 3 #cylinder
        marker.action = 0 #add
        marker.scale.x = 0.2
        marker.scale.y = 0.2
        marker.scale.z = 1.0
        marker.color.a = 1.0
        marker.lifetime = rospy.Duration(0)

        # Sub
        sub = rospy.Subscriber('/odometry/filtered', Odometry, callback, queue_size=100)

        rospy.spin()

    except rospy.ROSInterruptException: pass
